<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>âš¡ì°Œë¦¿ì°Œë¦¿, ì˜ˆë¯¼ë„ ì¸¡ì • í…ŒìŠ¤íŠ¸</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"/>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        
/* [ì¶”ì²œ 1] ì• ë‹ˆë©”ì´ì…˜ ê·¸ë¼ë°ì´ì…˜ ê²Œì´ì§€ CSS */
#gauge-fill {
    /* ì•„ë¦„ë‹¤ìš´ ê·¸ë¼ë°ì´ì…˜ ìƒ‰ìƒ */
    background: linear-gradient(90deg, #ff81ae 0%, #a269ff 100%);
    width: 0%; /* JSë¡œ ë„ˆë¹„ ì¡°ì ˆ */
    transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1); /* ë¶€ë“œëŸ¬ìš´ ì• ë‹ˆë©”ì´ì…˜ */
}

/* ë¹›ì´ ì§€ë‚˜ê°€ëŠ” ì‰¬ë¨¸(Shimmer) íš¨ê³¼ */
#gauge-fill::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
    animation: shimmer 2.5s infinite linear;
    opacity: 0; /* í‰ì†Œì—” ìˆ¨ê¹€ */
}

/* ê²Œì´ì§€ê°€ ì°¨ì˜¤ë¥¸ í›„ì—ë§Œ ë¹› íš¨ê³¼ê°€ ë‚˜íƒ€ë‚˜ë„ë¡ */
#gauge-fill[style*="width: 0%"]::after {
    opacity: 0;
}
#gauge-fill:not([style*="width: 0%"])::after {
    opacity: 1;
}


/* ì‰¬ë¨¸ ì• ë‹ˆë©”ì´ì…˜ ì •ì˜ */
@keyframes shimmer {
    0% {
        transform: translateX(-100%);
    }
    100% {
        transform: translateX(100%);
    }
}

/* [ì¶”ê°€] ê²°ê³¼ ì„¤ëª…(character-description) ìŠ¤íƒ€ì¼ */
#character-description {
    font-size: 0.95rem; /* ê¸°ë³¸ í°íŠ¸ë³´ë‹¤ ì‚´ì§ ì‘ê²Œ */
    color: #4b5563;     /* ë„ˆë¬´ ì§„í•˜ì§€ ì•Šì€ ë¶€ë“œëŸ¬ìš´ íšŒìƒ‰ */
    line-height: 1.6;   /* ì¤„ ê°„ê²©ì„ ì‚´ì§ ë„“í˜€ ê°€ë…ì„± í™•ë³´ */

    /* ì™¼ìª½ ì¸ìš©êµ¬ì²˜ëŸ¼ ë³´ì´ë„ë¡ ì¥ì‹ */
    background-color: #f9fafb; /* ì‚´ì§ ë‹¤ë¥¸ ë°°ê²½ìƒ‰ */
    border-left: 3px solid #fbcfe8; /* í…Œë§ˆì— ë§ëŠ” í•‘í¬ìƒ‰ ë¼ì¸ */
    padding: 1rem;
    border-radius: 8px;
}

/* [ìˆ˜ì •] ì˜ˆë¯¼í•œ ìˆœê°„(sensitive-moment) ì„¹ì…˜ ì œëª© ìŠ¤íƒ€ì¼ */
#sensitive-moment-section h3 {
    font-size: 1.2rem;
    font-weight: 700; /* ì œëª©ì„ ë” êµµê²Œ */
    color: #111827;   /* ë” ì§„í•œ ê²€ì€ìƒ‰ìœ¼ë¡œ ê°•ì¡° */
    padding-bottom: 0.5rem;
    border-bottom: 1px solid #e5e7eb; /* ì•„ë˜ì— ì–‡ì€ ì„  ì¶”ê°€ */
    margin-bottom: 1rem;
}

/* [ìˆ˜ì •] ì˜ˆë¯¼í•œ ìˆœê°„ ë‚´ìš© ìŠ¤íƒ€ì¼ */
#sensitive-moment-content {
    background-color: transparent; /* ë°°ê²½ìƒ‰ ì œê±°í•˜ì—¬ ì°¨ë³„í™” */
    padding: 0;
    font-weight: 500; /* ì„¤ëª…ì„ ì¤‘ê°„ êµµê¸°ë¡œ */
    color: #1f2937;   /* ì„¤ëª…ë³´ë‹¤ ì§„í•œ íšŒìƒ‰ìœ¼ë¡œ ê°•ì¡° */
}

/* [ì¶”ê°€] ê³µìœ  ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
/* [ìˆ˜ì •] ê³µìœ  ë²„íŠ¼ ì „ì²´ ìŠ¤íƒ€ì¼ */
.share-buttons-container {
    display: flex;
    gap: 16px; /* ë²„íŠ¼ ì‚¬ì´ ê°„ê²© */
    justify-content: center;
    margin-top: 24px;
    padding-bottom: 24px;
}

/* ëª¨ë“  ë²„íŠ¼ì˜ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
.share-button {
    width: 52px;
    height: 52px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid transparent; /* í…Œë‘ë¦¬ ê³µê°„ í™•ë³´ */
    cursor: pointer;
    transition: all 0.2s ease-in-out;
}

/* ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¸ì„ ë•Œì˜ ê³µí†µ íš¨ê³¼ */
.share-button:hover {
    transform: translateY(-4px); /* ì‚´ì§ ë– ì˜¤ë¥´ëŠ” íš¨ê³¼ */
    filter: brightness(0.95); /* ì‚´ì§ ì–´ë‘ì›Œì§€ë©° ì…ì²´ê° */
}

/* ì•„ì´ì½˜ ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
.share-button i {
    font-size: 26px;
    transition: transform 0.2s ease-in-out;
}

/* --- ê° ë²„íŠ¼ ë³„ ìƒ‰ìƒ ì§€ì • --- */

/* 1. ì¹´ì¹´ì˜¤í†¡ ë²„íŠ¼ */
.share-button.kakao {
    background-color: #FEE500; /* ì¹´ì¹´ì˜¤ ë…¸ë€ìƒ‰ */
}
.share-button.kakao i {
    color: #000000; /* ì•„ì´ì½˜ì€ ê²€ì€ìƒ‰ */
}

/* 2. X (íŠ¸ìœ„í„°) ë²„íŠ¼ */
.share-button.x {
    background-color: #000000; /* X ê²€ì€ìƒ‰ */
}
.share-button.x i {
    color: #FFFFFF; /* ì•„ì´ì½˜ì€ í°ìƒ‰ */
}

/* 3. ì¸ìŠ¤íƒ€ê·¸ë¨ ë§í¬ (ì•„ì›ƒë¼ì¸ ìŠ¤íƒ€ì¼) */
.share-button.instagram {
    background-color: transparent; /* ë°°ê²½ì€ íˆ¬ëª…í•˜ê²Œ */
    border-color: #E1306C; /* ì¸ìŠ¤íƒ€ê·¸ë¨ ëŒ€í‘œ í•‘í¬ìƒ‰ í…Œë‘ë¦¬ */
}
.share-button.instagram i {
    color: #E1306C; /* ì•„ì´ì½˜ë„ ê°™ì€ í•‘í¬ìƒ‰ */
}

/* ì¸ìŠ¤íƒ€ê·¸ë¨ ë²„íŠ¼ì— ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë¦¬ë©´ ìƒ‰ì´ ì±„ì›Œì§€ëŠ” íš¨ê³¼ */
.share-button.instagram:hover {
    background-color: #E1306C;
    filter: none; /* ë°ê¸° ë³€í™”ëŠ” ì œê±° */
}
.share-button.instagram:hover i {
    color: #FFFFFF; /* ì•„ì´ì½˜ì€ í°ìƒ‰ìœ¼ë¡œ */
}
    </style>
</head>
<body class="bg-slate-50 text-gray-800">

    <div id="app" class="max-w-md mx-auto min-h-screen bg-white shadow-lg">

        <!-- ì‹œì‘ í˜ì´ì§€ -->
        <div id="start-page" class="flex flex-col items-center justify-center h-screen p-8 text-center">
            <h1 class="text-4xl font-bold mb-4">âš¡ì°Œë¦¿ì°Œë¦¿, <br>ì˜ˆë¯¼ë„ ì¸¡ì • í…ŒìŠ¤íŠ¸</h1>
            <p class="text-gray-600 mb-8">ì˜ˆë¯¼ ì§€ìˆ˜ì— ë”°ë¼ í¬ê³¡ì„ ì¶”ì²œí•´ ë“œë ¤ìš”.</p>
            <div class="w-48 h-48 bg-pink-100 rounded-full flex items-center justify-center mb-8">
                <svg xmlns="http://www.w3.org/2000/svg" class="w-24 h-24 text-pink-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                </svg>
            </div>
            <button onclick="startTest()" class="w-full bg-pink-400 text-white font-bold py-4 px-6 rounded-full hover:bg-pink-500 transition-colors duration-300 shadow-lg">
                í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°
            </button>

            <div class="share-buttons-container">
                <button onclick="shareToKakao()" class="share-button kakao" data-tooltip="ì¹´ì¹´ì˜¤í†¡ìœ¼ë¡œ ê³µìœ ">
                    <i class="fa-solid fa-comment"></i>
                </button>
                <button onclick="shareToX()" class="share-button x" data-tooltip="Xì— ê³µìœ ">
                    <i class="fa-brands fa-x-twitter"></i>
                </button>
                <button onclick="shareToInstagram()" class="share-button instagram" data-tooltip="ì§€ë§Œì§€ë“œë¼ë§ˆ ì¸ìŠ¤íƒ€ê·¸ë¨">
                    <i class="fa-brands fa-instagram"></i>
                </button>
            </div>

        </div>

        <!-- ì§ˆë¬¸ í˜ì´ì§€ -->
        <div id="quiz-page" class="hidden p-6">
            <div class="w-full bg-gray-200 rounded-full h-2.5 mb-6">
                <div id="progress-bar" class="bg-pink-400 h-2.5 rounded-full" style="width: 0%"></div>
            </div>
            <div class="text-center mb-6">
                <p id="question-counter" class="text-sm text-gray-500"></p>
                <h2 id="question-text" class="text-xl font-bold mt-2 h-20"></h2>
            </div>
            <div id="answers-container" class="space-y-3">
                <!-- ë‹µë³€ ë²„íŠ¼ë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>
        </div>

        <!-- ê²°ê³¼ í˜ì´ì§€ -->
         <!-- ê²°ê³¼ í˜ì´ì§€ -->
         <div id="result-page" class="hidden p-8">
            <div class="text-center">
                <p class="text-gray-600">ë‹¹ì‹ ì˜ ì˜ˆë¯¼ë„ ë ˆë²¨ì€</p>
                <div class="flex items-baseline justify-center gap-2 my-2">
                    <span id="character-level" class="text-2xl font-bold text-pink-500"></span>
                    <h2 id="character-name" class="text-3xl font-bold"></h2>
                </div>
                <img id="character-image" src="" alt="ê²°ê³¼ ìºë¦­í„° ì´ë¯¸ì§€" class="w-48 h-48 mx-auto rounded-full object-cover my-6 shadow-xl">
                
                <div id="gauge-container" class="w-full h-4 bg-slate-200 rounded-full overflow-hidden shadow-inner">
                    <div id="gauge-fill" class="h-full rounded-full relative"></div>
                </div>

                <div id="character-description" class="text-gray-700 mt-6 text-left bg-slate-100 p-5 rounded-lg"></div>
            </div>

            <div id="sensitive-moment-section" class="mt-8">
                <h3 class="text-xl font-bold mb-4">ë‚˜ëŠ” ì´ëŸ´ ë•Œ ì˜ˆë¯¼í•´ìš”!</h3>
                <div id="sensitive-moment-content" class="bg-slate-100 p-5 rounded-lg space-y-3 text-gray-700">
                   <!-- ì˜ˆë¯¼í•œ ìˆœê°„ ë‚´ìš©ì´ ì—¬ê¸°ì— ë“¤ì–´ê°‘ë‹ˆë‹¤ -->
                </div>
           </div>
           
           <div id="play-recommendation-section" class="mt-8">
               <h3 class="text-xl font-bold mb-4">ì´ëŸ° í¬ê³¡ ì–´ë•Œìš”?</h3>
               <div class="bg-white p-6 rounded-lg shadow-md border">
                   <div class="flex gap-4 items-start">
                       <img id="play-image" src="" alt="ì¶”ì²œ í¬ê³¡ í‘œì§€" class="w-24 h-36 object-cover rounded flex-shrink-0 shadow-sm">
                       <div class="flex flex-col flex-1">
                           <h4 id="play-title" class="text-lg font-bold text-pink-500"></h4>
                           <p id="play-author" class="text-sm text-gray-500 mb-3"></p>
                           <p id="play-description" class="text-gray-600 text-sm"></p>
                       </div>
                   </div>
                   <button class="w-full mt-6 bg-gray-800 text-white font-bold py-3 px-4 rounded-full hover:bg-black transition-colors">
                       êµ¬ë§¤í•˜ê¸°
                   </button>
               </div>
           </div>


            <button onclick="restartTest()" class="w-full mt-10 bg-pink-400 text-white font-bold py-4 px-6 rounded-full hover:bg-pink-500 transition-colors duration-300 shadow-lg">
                í…ŒìŠ¤íŠ¸ ë‹¤ì‹œí•˜ê¸°
            </button>
        </div>
    </div>

    <script>
    // [ì¶”ê°€] ì¹´ì¹´ì˜¤ SDK ì´ˆê¸°í™”
    Kakao.init('ebe32603af5a77385396832db327f040'); // ğŸ‘ˆ ì—¬ê¸°ì— ë°œê¸‰ë°›ì€ í‚¤ë¥¼ ë„£ìœ¼ì„¸ìš”!

    // [ì¶”ê°€] ê³µìœ  í•¨ìˆ˜ë“¤
    const zmanzInstagramUrl = 'https://www.instagram.com/zmanzdrama/';
    
                const questions = [
            // ê°€ì¡±
            { category: 'ê°€ì¡±', text: 'ê°€ì¡±ê³¼ ì‚¬ì†Œí•œ ì¼ë¡œ ë‹¤íˆ¬ëŠ”ë° "ë„Œ ì™œ ê·¸ë ‡ê²Œ ì˜ˆë¯¼í•˜ëƒ"ë©° ë©´ë°•ì„ ì¤€ë‹¤.', answers: [ { text: 'í•œ ê·€ë¡œ ë“£ê³  í˜ë¦°ë‹¤', score: 0 }, { text: 'ë‚´ê°€ ì˜ˆë¯¼í•˜ë‹¤ê³ â€¦?', score: 1 }, { text: 'ë‚˜ì˜ í–‰ë™ì„ ê³±ì”¹ëŠ”ë‹¤', score: 2 }, { text: 'ë°˜ë°•í•œë‹¤', score: 3 } ] },
            { category: 'ê°€ì¡±', text: 'ê°€ì¡±ì´ ë‚´ ì˜·ì„ ëª°ë˜ ì…ì—ˆë‹¤.', answers: [ { text: 'ì…ì—ˆë‹¤ëŠ” ì‚¬ì‹¤ì¡°ì°¨ ëª¨ë¥¸ë‹¤.', score: 0 }, { text: 'ê·¸ëŸ°ê°€ ë³´ë‹¤ í•˜ê³  ë„˜ê¸´ë‹¤.', score: 1 }, { text: 'â€œë§í•˜ê³  ì…ì„ë˜?â€', score: 2 }, { text: 'â€œì ˆëŒ€ ì…ì§€ ë§ˆ!â€', score: 3 } ] },
            // ì¸ê°„ê´€ê³„
            { category: 'ì¸ê°„ê´€ê³„', text: 'ì´ì „ì— í–ˆë˜ ì–˜ê¸°ë¥¼ ì¹œêµ¬ê°€ ê¸°ì–µ ëª» í•œë‹¤.', answers: [ { text: 'â€œê·¸ëŸ´ ìˆ˜ ìˆì§€â€ ëŒ€ìˆ˜ë¡­ì§€ ì•Šê²Œ ë„˜ê¸´ë‹¤', score: 0 }, { text: 'â€œê´œì°®ì•„"ë¼ê³  ë§í•˜ì§€ë§Œ ì†ìœ¼ë¡œ ì„œìš´í•˜ë‹¤', score: 1 }, { text: 'ì„œìš´í•œ ë§ˆìŒì´ í‘œì •ì— ë“œëŸ¬ë‚œë‹¤', score: 2 }, { text: 'â€œì„œìš´í•˜ë‹¤"ê³  ì§ì ‘ ë§í•œë‹¤', score: 3 } ] },
            { category: 'ì¸ê°„ê´€ê³„', text: 'ë¬´ë¦¬ë¡œ ë…¸ëŠ” ì¹œêµ¬ë“¤ ì¤‘ ì†Œìˆ˜ê°€ ë‚˜ ë¹¼ê³  ë”°ë¡œ ëª¨ì˜€ë‹¤ëŠ” ì‚¬ì‹¤ì„ ì¸ìŠ¤íƒ€ê·¸ë¨ ìŠ¤í† ë¦¬ë¥¼ ë³´ê³  ì•Œê²Œ ëë‹¤.', answers: [ { text: 'ì¬ë°Œê²Œ ë†€ì•˜ë„¤~ ìŠ¤í† ë¦¬ì— ë‹µì¥í•˜ê±°ë‚˜ í•˜íŠ¸ë¥¼ ëˆ„ë¥¸ë‹¤.', score: 0 }, { text: 'ê·¸ëŸ°ê°€ ë³´ë‹¤ í•˜ê³  ë„˜ê¸´ë‹¤.', score: 1 }, { text: 'ì™œ ë‚˜ëŠ” ì•ˆ ë¶ˆë €ì„ê¹Œ? ì¡°ê¸ˆ ì„œìš´í•´í•œë‹¤.', score: 2 }, { text: 'ë‚˜ ë¹¼ê³  ë…¼ ê²Œ ë¶„ëª…íˆ ì´ìœ ê°€ ìˆì„ ê±°ë¼ ìƒê°í•´ ì´í›„ ì¡°ê¸ˆì”© ê±°ë¦¬ë¥¼ ë‘”ë‹¤.', score: 3 } ] },
            // ì‚¬ë‘
            { category: 'ì‚¬ë‘', text: 'ì• ì¸ì´ ë§Œë‚˜ê¸°ë¡œ í•œ ë‹¹ì¼ì— ì‹¤ìˆ˜ë¡œ ì•½ì†ì„ ì´ì¤‘ìœ¼ë¡œ ì¡ì•˜ë‹¤ê³  ë‚´ì¼ ë§Œë‚  ìˆ˜ ì—†ê² ëƒê³  í•œë‹¤. ë‚´ì¼ ë§ˆì¹¨ ì•½ì†ì´ ìˆë‹¤.', answers: [ { text: 'â€œê·¸ëŸ¼ ì´ ë‚ ì€ ì–´ë•Œ?â€ ì ê·¹ì ìœ¼ë¡œ ë‹¤ë¥¸ ë‚ ì„ ì¡ëŠ”ë‹¤.', score: 0 }, { text: 'â€œë‹¤ìŒ ì£¼ì— ë§Œë‚˜ì§€, ë­~â€ ê·¸ëŸ´ ìˆ˜ ìˆë‹¤ê³  ìƒê°í•˜ë©° ë„˜ê¸´ë‹¤.', score: 1 }, { text: 'â€œê´œì°®ì•„"ë¼ê³  ë§í•˜ì§€ë§Œ ì†ìœ¼ë¡œ ì„œìš´í•˜ë‹¤.', score: 2 }, { text: 'â€œë‚˜ëŠ” ë¯¸ë¦¬ ì‹œê°„ì„ ë¹¼ ë†“ì€ ê±´ë°â€¦ ë‚˜í•œí…Œ ì¢€ ë” ì‹ ê²½ ì¨ ì¤˜.â€ í¬ê²Œ ì„œìš´í•˜ë‹¤.', score: 3 } ] },
            { category: 'ì‚¬ë‘', text: 'ì• ì¸ì´ ë°”ì˜ë‹¤ê³  í•˜ë£¨ì¢…ì¼ ì—°ë½ì´ ì—†ë‹¤.', answers: [ { text: 'ë‚˜ë„ ì¼ì— ì—´ì¤‘í•˜ê³  ìˆì–´ì„œ ëˆˆì¹˜ ëª» ì±ˆë‹¤.', score: 0 }, { text: 'ë‚˜ë„ ì¼ì— ì—´ì¤‘í•˜ê³  ìˆë‹¤ê°€ ë¬¸ë“ íœ´ëŒ€í°ì„ í™•ì¸í•œë‹¤.', score: 1 }, { text: 'ì™œ ì—°ë½ì´ ì—†ì§€? ê¸°ë‹¤ë¦°ë‹¤.', score: 2 }, { text: 'ì™œ ì—°ë½ì´ ì•ˆ ë˜ëƒê³  ì¹´í†¡í•˜ê±°ë‚˜ ì „í™”í•œë‹¤.', score: 3 } ] },
            // ì§ì—…
            { category: 'ì§ì—…', text: 'íšŒì˜ì— ë„ˆë¬´ ë§ì€ ì‹œê°„ì„ ë³´ë‚´ëŠ” íšŒì‚¬ ìƒí™œ, ì •ì‘ ë‚´ ì—…ë¬´ë¥¼ í•  ì‹œê°„ì´ ì—†ë‹¤', answers: [ { text: 'â€œì¼ì€ ì¼ì¼ ë¿â€ ê¹Šê²Œ ìƒê°í•˜ì§€ ì•ŠëŠ”ë‹¤', score: 0 }, { text: 'â€œíšŒì‚¬ ìƒí™œì´ ë‹¤ ê·¸ëŸ°ê°€ ë³´ë‹¤â€ ëŒ€ì¶© ê·œì¹™ì— ë§ì¶˜ë‹¤', score: 1 }, { text: 'â€œì´ ìƒíƒœê°€ ìœ ì§€ë˜ë©´ ì´ì§ì„ ê³ ë ¤í•´ ë´ì•¼ì§€â€ ì§„ì§€í•˜ë‹¤', score: 2 }, { text: 'â€œíšŒì‚¬ì—ì„œ ë‚˜ì˜ ì“¸ëª¨ê°€ ë¬´ì—‡ì¸ì§€â€ ê³ ë¯¼í•œë‹¤', score: 3 } ] },
            { category: 'ì§ì—…', text: 'ê³µê° ê°€ì§€ ì•ŠëŠ” ì§€ì‹œë¥¼ ë”°ë¼ì•¼ í•œë‹¤. ìƒëŒ€ëŠ” ë‚˜ì˜ ì§ì† ìƒì‚¬ë‹¤.', answers: [ { text: 'ìƒì‚¬ì˜ ì§€ì‹œë¥¼ ë”°ë¥¸ë‹¤', score: 0 }, { text: 'íƒ€í˜‘ ì§€ì ì„ ì°¾ëŠ”ë‹¤', score: 1 }, { text: 'ìì‹ ì˜ ì˜ê²¬ì„ ì–´í•„í•œë‹¤', score: 2 }, { text: 'íŒ€ ì´ë™ì„ ê±´ì˜í•œë‹¤', score: 3 } ] },
            // ì •ì²´ì„±
            { category: 'ì •ì²´ì„±', text: 'ë‹¹ì‹ ì˜ í–‰ë™ì„ ëˆ„êµ°ê°€ ì˜¤í•´í•˜ê³  ì œì‚¼ìì—ê²Œ ì˜ëª»ëœ ì†Œë¬¸ì„ í¼ëœ¨ë¦¬ê³  ìˆë‹¤ëŠ” ê±¸ ì•Œì•˜ë‹¤.', answers: [ { text: 'â€œì˜¤í•´ëŠ” ì˜¤í•´ì¼ ë¿. ë‚˜ë§Œ ë–³ë–³í•˜ë©´ ë˜ì§€~â€', score: 0 }, { text: 'â€œë‚˜ì— ëŒ€í•´ ë­˜ ì•ˆë‹¤ê³ ?â€', score: 1 }, { text: 'â€œë‚´ê°€ ì˜¤í•´í•  ë§Œí•œ í–‰ë™ì„ í–ˆë˜ê°€?â€', score: 2 }, { text: 'â€œì‹ ê²½ ì“°ì´ë„¤â€¦â€', score: 3 } ] },
            { category: 'ì •ì²´ì„±', text: 'ì§€í•˜ì² ì„ íƒ”ëŠ”ë° ë‚´ ì•ì— ë©”ì´ë“œë³µì„ ì…ê³  ì½”ìŠ¤í”„ë ˆí•œ ì‚¬ëŒì´ ìˆë‹¤.', answers: [ { text: 'ì£¼ë³€ì„ ì˜ ì˜ì‹í•˜ì§€ ì•Šì•„ ëª¨ë¥¸ë‹¤', score: 0 }, { text: 'ì‚¬ëŒë“¤ì´ íë”ê±°ë¦¬ëŠ” ìª½ì„ ì³ë‹¤ë³¸ë‹¤', score: 1 }, { text: 'ë‹¤ë“¤ ì‹ ê²½ ì“°ì§€ ì•ŠëŠ”ë° ë‚˜ëŠ” ìê¾¸ ì‹œì„ ì´ ê°„ë‹¤', score: 2 }, { text: 'ì½”ìŠ¤í”„ë ˆ ë¬¸í™”ì— ê´€ì‹¬ì´ ìƒê¸´ë‹¤', score: 3 } ] },
            // ì‚¬íšŒë¬¸ì œ
            { category: 'ì‚¬íšŒë¬¸ì œ', text: 'ì˜í™”ë¥¼ ë³´ëŠ”ë° í”¼ë¥¼ í˜ë¦¬ëŠ” ì¥ë©´ì´ ë‚˜ì™”ì„ ë•Œ,', answers: [ { text: 'ì§„ì§œ ìƒí™©ì´ ì•„ë‹ˆë‹ˆê¹Œ ì•„ë¬´ë ‡ì§€ ì•Šë‹¤.', score: 0 }, { text: 'ì†ìœ¼ë¡œ ê°€ë¦¬ë©´ì„œ ë³¼ ê±´ ë‹¤ ë³¸ë‹¤.', score: 1 }, { text: 'ê·¸ ì¥ë©´ë§Œ ê±´ë„ˆë›°ê³  ë‹¤ì‹œ ì§‘ì¤‘í•œë‹¤.', score: 2 }, { text: 'ë‹¤ ë³´ì§€ ëª»í•˜ê³  ì˜í™”ë¥¼ ëˆë‹¤.', score: 3 } ] },
            { category: 'ì‚¬íšŒë¬¸ì œ', text: 'ë‹¹ì‹ ì€ íŠ¸ìœ„í„° ë…¼ìŸì—,', answers: [ { text: 'í¬ê²Œ ê´€ì‹¬ ì—†ë‹¤', score: 0 }, { text: 'ê´€ì‹¬ ìˆëŠ” ë…¼ìŸê±°ë¦¬ë©´ ì¬ê²Œì‹œí•œë‹¤', score: 1 }, { text: 'í•´ë‹¹ íŠ¸ìœ—ì„ ì¸ìš©í•´ ì˜ê²¬ì„ ë‹¨ë‹¤', score: 2 }, { text: 'ìƒê°ì„ ì •ë¦¬í•´ íŠ¸ìœ„í„°ì— ê²Œì‹œí•œë‹¤', score: 3 } ] }
        ];

        const results = {
            'Lv.0': { 
                name: 'ë§Œì‚¬í‰ì˜¨ ë¶€ì²˜', 
                img: './img/lv0.jpg', 
                personality: 'ì›¬ë§Œí•œ ì¼ì—” í™”ë„ ì•ˆ ë‚˜ìš”. <br>ëˆ„ê°€ ë­ë¼ê³  í•´ë„ â€œê·¸ëŸ´ ìˆ˜ë„ ìˆì§€~â€ê°€ ë¨¼ì € ë‚˜ì™€ìš”. <br>ë­ë¼ í•˜ë“  ëŒ€ë¶€ë¶„ ì›ƒê³  ë„˜ê²¨ìš”. <br>ì˜ˆë¯¼í•  í‹ˆì´ ì—†ê¸°ë„ í•´ìš”. ì—ë„ˆì§€ ì•„ê¹Œìš°ë‹ˆê¹Œ. <br>í•œë‘ ë²ˆ ë’¤ëì€ ë‚¨ì§€ë§Œ ë³´í†µ ë’¤ëŒì•„ì„œë©´ ê¸ˆë°© ìŠì–´ìš”!' 
            },
            'Lv.1': { 
                name: 'ë¯¸ë¬˜ ì˜ˆë¯¼ëŸ¬', 
                img: './img/lv1.jpg', 
                personality: 'ì‹ ê²½ì„ ê³¤ë‘ì„¸ìš°ëŠ” ì¼ì€ ê±°ì˜ ì—†ì–´ìš”. <br>ëˆ„ê°€ ë­ë¼ í•´ë„ â€œê·¸ëŸ´ ìˆ˜ë„ ìˆì§€â€ í•˜ê³  ë„˜ê¸°ëŠ” í¸. <br>ì˜¤ëŠ˜ì€ ì•„ë¬´ ìƒê° ì—†ì´ ê±·ë‹¤ê°€ ë§ˆìŒ ê°€ëŠ” ì¹´í˜ì— ë“¤ë¥¼ ê±°ì˜ˆìš”.' 
            },
            'Lv.2': { 
                name: 'ê°ì§€ ì˜ˆë¯¼ëŸ¬', 
                img: './img/lv2.jpg', 
                personality: 'ë§íˆ¬, í‘œì •, ëŒ€í™” í…œí¬ê¹Œì§€ ì „ë¶€ ìºì¹˜í•´ìš”. <br>"ê·¸ëƒ¥ í•œ ë§ì´ì•¼"ê°€ ì œì¼ ìƒì²˜ë¼ìš”. <br>í˜¼ì ë™ë™ëŒ€ë‹¤ ê´œì°®ì€ ì²™í•˜ê¸°ë„ í•´ìš”. <br>ì–µìš¸í•´ë„ \'ë‚´ê°€ ì˜ˆë¯¼í•œê°€?\' í•˜ê³  ìŠ¤ìŠ¤ë¡œë¥¼ ì˜ì‹¬í•˜ì£ . <br>ê°ì •ì€ ë‚˜ë§Œ ì•„ëŠ” ì¼ê¸°ì¥ì— ì €ì¥ ì¤‘.' 
            },
            'Lv.3': { 
                name: 'ì´‰ê° ì˜ˆë¯¼ëŸ¬', 
                img: './img/lv3.jpg', 
                personality: 'ì–´ë–¤ ë§ì€ ë°¤ì— ìê¾¸ ìƒê°ë‚˜ìš”. <br>ëˆˆë¬¼ì€ ì•ˆ ë‚˜ëŠ”ë° ë§ˆìŒì´ ë¬´ê±°ìš´ ë‚ ì´ ìˆì–´ìš”. <br>ê·¸ëŸ´ ë• ìê¾¸ ê³ ì–‘ì´ ì§¤ ì €ì¥í•˜ê²Œ ë¼ìš”. <br>ì˜¤ëŠ˜ì€ ì¹¨ëŒ€ì— ëˆ„ì›Œ ì˜ìƒ ë³´ë©° ê¹”ê¹” ì›ƒê³  ë’¹êµ´ê±°ë¦´ ì˜ˆì •!' 
            },
            'Lv.4': { 
                name: 'ë²ˆê°œ ì˜ˆë¯¼ëŸ¬', 
                img: './img/lv4.jpg', 
                personality: 'ì›¬ë§Œí•˜ë©´ ì°¸ì§€ë§Œ ìŒ“ì´ê³ , ìŒ“ì´ê³ , ë˜ ìŒ“ì´ë‹¤ê°€ ì–´ëŠ ìˆœê°„ â€œê·¸ë§Œí•´!â€ ë‚˜ì˜¤ì£ . <br>ê°ì • ê¸°ë³µì´ ì‹¬í•œ ê±° ê°™ê¸´ í•´ìš”. <br>ëª¨ë‘ê°€ ì›ƒê³  ìˆì–´ë„ ë‚œ ë¶ˆí¸í•˜ë©´ ì›ƒì„ ìˆ˜ ì—†ì–´ìš”. <br>ì˜¤ëŠ˜ì€ ë™ë„¤ ì‚°ì±…í•˜ë©° ì €ë… ì‹œê°„ì„ ë³´ë‚´ìš”.' 
            },
            'Lv.5': { 
                name: 'ì²œë‘¥ì‹  ì˜ˆë¯¼ëŸ¬', 
                img: './img/lv5.jpg', 
                personality: 'ì›¬ë§Œí•˜ë©´ ëª¨ì„ì€ ì•ˆ ë‚˜ê°€ìš”. <br>ì‚¬ëŒ ë§ì€ ë° ê°€ë©´ ìë™ìœ¼ë¡œ ëˆˆì¹˜ ëª¨ë“œ ON. <br>ì†Œë¦¬, í–¥, ì¡°ëª…, ë§íˆ¬, ë¶„ìœ„ê¸°... ë‹¤ ìºì¹˜ë¼ìš”. ëª» ë³¸ ì²™ì´ ì•ˆ ë¼ìš”. <br>ì˜¤ëŠ˜ì€ ì¡°ìš©í•œ ë°© ì•ˆì—ì„œ ì´ì–´í° ë¼ê³ , ê°ì •ì„  ì˜ˆë¯¼í•œ ì˜í™” í•œ í¸ ë³´ë©´ ë”±!' 
            }
        };

        const categoryInfo = {
            'ê°€ì¡±': { title: 'ê°€ì¡± ê´€ê³„', content: `<p class="mb-2">âœ”ï¸ ë‚´ ì„ íƒì´ë‚˜ ìƒí™œ ë°©ì‹ì„ ì„¸ì„¸í•˜ê²Œ ê°„ì„­ë°›ì„ ë•Œ</p><p>âœ”ï¸ ë‚´ ë…¸ë ¥ì´ ì œëŒ€ë¡œ ì¸ì •ë°›ì§€ ëª»í•œë‹¤ê³  ëŠë‚„ ë•Œ</p>`},
            'ì¸ê°„ê´€ê³„': { title: 'ì¸ê°„ê´€ê³„', content: `<p class="mb-2">âœ”ï¸ ë‹¤ë“¤ í™œë°œíˆ ì–˜ê¸°í•˜ë‹¤ê°€ ë‚´ê°€ ë§í•˜ì ê°‘ìê¸° ì¡°ìš©í•´ì§ˆ ë•Œ</p><p>âœ”ï¸ ì¹œêµ¬ë“¤ë¼ë¦¬ ë‹¤ ì•„ëŠ” ì–˜ê¸°ë¥¼ ë‚˜ë§Œ ëª¨ë¥´ê³  ìˆì„ ë•Œ</p>`},
            'ì‚¬ë‘': { title: 'ì‚¬ë‘ê³¼ ì—°ì• ', content: `<p class="mb-2">âœ”ï¸ ë‚´ê°€ ê¸°ëŒ€í•œ ê´€ì‹¬ì´ë‚˜ ì• ì •ì„ ë°›ì§€ ëª»í•  ë•Œ</p><p>âœ”ï¸ ìƒëŒ€ê°€ ë‚˜ì˜ ì‹œê°„ì„ ê°€ë³ê²Œ ì—¬ê¸¸ ë•Œ</p>`},
            'ì§ì—…': { title: 'ì§ì—…ê³¼ ì»¤ë¦¬ì–´', content: `<p class="mb-2">âœ”ï¸ ë‚´ê°€ ì“´ ë³´ê³ ì„œì—ì„œ ì˜¤íƒ€ í•˜ë‚˜ë¥¼ ë°œê²¬í–ˆì„ ë•Œ</p><p>âœ”ï¸ ë‚´ê°€ ë‚©ë“í•˜ì§€ ëª»í•˜ëŠ” ì§€ì‹œë¥¼ ì–µì§€ë¡œ ë”°ë¼ì•¼ í•  ë•Œ</p>`},
            'ì •ì²´ì„±': { title: 'ë‚˜ì˜ ì •ì²´ì„±', content: `<p class="mb-2">âœ”ï¸ ë‚´ ì·¨í–¥ì´ ì˜ì™¸ë¼ëŠ” ë°˜ì‘ì„ ë“¤ì„ ë•Œ</p><p>âœ”ï¸ ë‚´ê°€ í•œ í–‰ë™ì´ ê³¼ì¥ë˜ê²Œ ë°›ì•„ë“¤ì—¬ì§ˆ ë•Œ</p>`},
            'ì‚¬íšŒë¬¸ì œ': { title: 'ì‚¬íšŒë¬¸ì œ', content: `<p class="mb-2">âœ”ï¸ í˜ì˜¤ í‘œí˜„ì„ ì•„ë¬´ë ‡ì§€ ì•Šê²Œ ì£¼ê³ ë°›ëŠ” ë¶„ìœ„ê¸°ì¼ ë•Œ</p><p>âœ”ï¸ ì§„ì§€í•œ ì‚¬íšŒ ì´ìŠˆë¥¼ ì–˜ê¸°í•˜ëŠ”ë°, ìƒëŒ€ê°€ ë†ë‹´ì²˜ëŸ¼ ê°€ë³ê²Œ ëŒ€í•  ë•Œ</p>`}
        };
        
        let playRecommendations = {}; 

        document.addEventListener('DOMContentLoaded', function() {
            fetch('books.csv')
                .then(response => response.text())
                .then(csvText => {
                    Papa.parse(csvText, {
                        header: true,
                        skipEmptyLines: true,
                        complete: function(results) {
                            const structuredData = {};
                            results.data.forEach(book => {
                                const { level, category, title, author, desc, img, link } = book;
                                if (level === 'Lv.0') {
                                    structuredData['Lv.0'] = { title, author, desc, img: './img/' + img, link: 'https://zmanzdrama.com'+ link };
                                } else {
                                    if (!structuredData[level]) {
                                        structuredData[level] = {};
                                    }
                                    structuredData[level][category] = { title, author, desc, img: './img/' + img, link: 'https://zmanzdrama.com'+ link };
                                }
                            });
                            playRecommendations = structuredData;
                            console.log("ğŸ“š ë„ì„œ ì •ë³´ ë¡œë”© ì™„ë£Œ!", playRecommendations);
                        }
                    });
                });
        });       // --- ìˆ˜ì •ëœ ë¶€ë¶„ ---

        let currentQuestionIndex = 0;
        let scores = { 'ê°€ì¡±': 0, 'ì¸ê°„ê´€ê³„': 0, 'ì‚¬ë‘': 0, 'ì§ì—…': 0, 'ì •ì²´ì„±': 0, 'ì‚¬íšŒë¬¸ì œ': 0 };
        
        // 1. ê²Œì´ì§€ ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì €ì¥í•  ë³€ìˆ˜ ì¶”ê°€
        let sensitivityGauge = null; 
        // 2. ê¸°ì¡´ animationFrameId ë³€ìˆ˜ëŠ” ì œê±°

        const startPage = document.getElementById('start-page');
        const quizPage = document.getElementById('quiz-page');
        const resultPage = document.getElementById('result-page');
        const progressBar = document.getElementById('progress-bar');
        const questionCounter = document.getElementById('question-counter');
        const questionText = document.getElementById('question-text');
        const answersContainer = document.getElementById('answers-container');
        const gaugeFill = document.getElementById('gauge-fill');


        function shareToKakao() {
        // í˜„ì¬ í˜ì´ì§€ê°€ ê²°ê³¼ í˜ì´ì§€ì¸ì§€ í™•ì¸
        const resultPage = document.getElementById('result-page');
        const isResultPage = !resultPage.classList.contains('hidden');
        
        let title = 'âš¡ì°Œë¦¿ì°Œë¦¿, ì˜ˆë¯¼ë„ ì¸¡ì • í…ŒìŠ¤íŠ¸';
        let description = 'ë‚´ ì˜ˆë¯¼ ì§€ìˆ˜ëŠ” ì–´ëŠ ì •ë„ì¼ê¹Œ? ì§€ë§Œì§€ë“œë¼ë§ˆê°€ í¬ê³¡ì„ ì¶”ì²œí•´ ë“œë ¤ìš”.';
        let imageUrl = './img/main-thumbnail.jpg'; // ğŸ‘ˆ ëŒ€í‘œ ì¸ë„¤ì¼ ì´ë¯¸ì§€ ì£¼ì†Œ
        
        // ê²°ê³¼ í˜ì´ì§€ë¼ë©´ ë‚´ìš© ë³€ê²½
        if (isResultPage) {
            const level = document.getElementById('character-level').textContent;
            const name = document.getElementById('character-name').textContent;
            const characterImg = document.getElementById('character-image').src;
            
            title = `ë‚˜ì˜ ì˜ˆë¯¼ë„ ê²°ê³¼ëŠ”? ${level} ${name}`;
            description = `ë‹¹ì‹ ë„ í…ŒìŠ¤íŠ¸í•´ë³´ê³  ì§€ë§Œì§€ë“œë¼ë§ˆê°€ ì¶”ì²œí•˜ëŠ” í¬ê³¡ì„ ë§Œë‚˜ë³´ì„¸ìš”!`;
            imageUrl = characterImg;
        }

        Kakao.Share.sendDefault({
            objectType: 'feed',
            content: {
                title: title,
                description: description,
                imageUrl: imageUrl,
                link: {
                    mobileWebUrl: window.location.href,
                    webUrl: window.location.href,
                },
            },
            buttons: [
                {
                    title: 'ê²°ê³¼ í™•ì¸í•˜ê¸°',
                    link: {
                        mobileWebUrl: window.location.href,
                        webUrl: window.location.href,
                    },
                },
            ],
        });
    }

    function shareToX() {
        const text = 'âš¡ì°Œë¦¿ì°Œë¦¿, ì˜ˆë¯¼ë„ ì¸¡ì • í…ŒìŠ¤íŠ¸! ë‚´ ì˜ˆë¯¼ ì§€ìˆ˜ì— ë”°ë¼ ì§€ë§Œì§€ë“œë¼ë§ˆê°€ í¬ê³¡ì„ ì¶”ì²œí•´ ë“œë ¤ìš”.';
        const url = window.location.href;
        window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank');
    }

    function shareToInstagram() {
        window.open(zmanzInstagramUrl, '_blank');
    }

        function startTest() {
            currentQuestionIndex = 0;
            scores = { 'ê°€ì¡±': 0, 'ì¸ê°„ê´€ê³„': 0, 'ì‚¬ë‘': 0, 'ì§ì—…': 0, 'ì •ì²´ì„±': 0, 'ì‚¬íšŒë¬¸ì œ': 0 };
            startPage.classList.add('hidden');
            quizPage.classList.remove('hidden');
            displayQuestion();
        }

        function displayQuestion() {
            if (currentQuestionIndex < questions.length) {
                const question = questions[currentQuestionIndex];
                progressBar.style.width = `${((currentQuestionIndex + 1) / questions.length) * 100}%`;
                questionCounter.textContent = `Q${currentQuestionIndex + 1} / ${questions.length}`;
                questionText.textContent = question.text;
                answersContainer.innerHTML = '';

                question.answers.forEach(answer => {
                    const button = document.createElement('button');
                    button.textContent = answer.text;
                    button.className = 'w-full p-4 my-2 bg-white border border-gray-300 rounded-lg text-left transition-colors hover:bg-pink-100 hover:border-pink-400';
                    button.onclick = () => selectAnswer(answer.score, question.category);
                    answersContainer.appendChild(button);
                });
            } else {
                showResults();
            }
        }

        function selectAnswer(score, category) {
            scores[category] += score;
            currentQuestionIndex++;
            displayQuestion();
        }

        // --- ìˆ˜ì •ëœ ë¶€ë¶„ ---
        // 3. ê¸°ì¡´ì˜ updateGauge í•¨ìˆ˜ëŠ” ì „ì²´ ì‚­ì œí•©ë‹ˆë‹¤.
        //    (ìƒˆë¡œìš´ ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ì´ ì—­í• ì„ ëŒ€ì‹ í•©ë‹ˆë‹¤)

        function showResults() {
    quizPage.classList.add('hidden');
    resultPage.classList.remove('hidden');

    const totalScore = Object.values(scores).reduce((sum, score) => sum + score, 0);
    let level;

    if (totalScore === 0) { level = 'Lv.0'; }
    else if (totalScore >= 1 && totalScore <= 7) { level = 'Lv.1'; }
    else if (totalScore >= 8 && totalScore <= 14) { level = 'Lv.2'; }
    else if (totalScore >= 15 && totalScore <= 21) { level = 'Lv.3'; }
    else if (totalScore >= 22 && totalScore <= 28) { level = 'Lv.4'; }
    else { level = 'Lv.5'; }
    
    const resultData = results[level];

    document.getElementById('character-level').textContent = level;
    document.getElementById('character-name').textContent = resultData.name;
    document.getElementById('character-image').src = resultData.img;
    document.getElementById('character-description').innerHTML = `<p>${resultData.personality}</p>`;
    
    // --- [ìˆ˜ì • ì—†ìŒ] ê²Œì´ì§€ ì±„ìš°ëŠ” ì½”ë“œëŠ” ê·¸ëŒ€ë¡œì…ë‹ˆë‹¤. ---
    const fillPercentage = (totalScore / 36) * 100;
    const gaugeFill = document.getElementById('gauge-fill');
    setTimeout(() => {
        gaugeFill.style.width = `${fillPercentage}%`;
    }, 100);

    const sensitiveMomentSection = document.getElementById('sensitive-moment-section');
    const playRecommendationSection = document.getElementById('play-recommendation-section');

    playRecommendationSection.classList.remove('hidden');

    if (level === 'Lv.0') {
        sensitiveMomentSection.classList.add('hidden');
        
        // ğŸ‘‡ --- [ìˆ˜ì •ëœ ë¶€ë¶„ ì‹œì‘] ---
        const recommendation = playRecommendations[level]; // CSVì—ì„œ ì½ì–´ì˜¨ Lv.0 ë„ì„œ ì •ë³´
        
        if (recommendation) {
            document.getElementById('play-image').src = recommendation.img;
            document.getElementById('play-title').textContent = recommendation.title;
            document.getElementById('play-author').textContent = `ì§€ì€ì´: ${recommendation.author}`;
            document.getElementById('play-description').textContent = recommendation.desc;

            // [ì¶”ê°€!] êµ¬ë§¤í•˜ê¸° ë²„íŠ¼ì„ ì°¾ì•„ í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
            const purchaseButton = document.querySelector('#play-recommendation-section button');
            purchaseButton.onclick = () => {
                if (recommendation.link) {
                    window.open(recommendation.link, '_blank'); // ìƒˆ íƒ­ì—ì„œ ë§í¬ ì—´ê¸°
                }
            };
        }
        // ğŸ‘† --- [ìˆ˜ì •ëœ ë¶€ë¶„ ë] ---

    } else {
        sensitiveMomentSection.classList.remove('hidden');
        
        let maxScore = -1;
        let highestCategories = [];
        for (const category in scores) {
            if (scores[category] > maxScore) {
                maxScore = scores[category];
                highestCategories = [category];
            } else if (scores[category] === maxScore) {
                highestCategories.push(category);
            }
        }

        const highestCategory = highestCategories[Math.floor(Math.random() * highestCategories.length)];
        document.getElementById('sensitive-moment-content').innerHTML = categoryInfo[highestCategory].content;
        
        // ğŸ‘‡ --- [ìˆ˜ì •ëœ ë¶€ë¶„ ì‹œì‘] ---
        // CSV ë°ì´í„°ê°€ ì•„ì§ ë¡œë”©ë˜ì§€ ì•Šì•˜ì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ, ë°ì´í„°ê°€ ìˆëŠ”ì§€ í™•ì¸ í›„ ì²˜ë¦¬í•©ë‹ˆë‹¤.
        const recommendation = playRecommendations[level] ? playRecommendations[level][highestCategory] : null;

        if (recommendation) {
            document.getElementById('play-image').src = recommendation.img;
            document.getElementById('play-title').textContent = recommendation.title;
            document.getElementById('play-author').textContent = `ì§€ì€ì´: ${recommendation.author}`;
            document.getElementById('play-description').textContent = recommendation.desc;

            // [ì¶”ê°€!] êµ¬ë§¤í•˜ê¸° ë²„íŠ¼ì„ ì°¾ì•„ í´ë¦­ ì´ë²¤íŠ¸ë¥¼ ì„¤ì •í•©ë‹ˆë‹¤.
            const purchaseButton = document.querySelector('#play-recommendation-section button');
            purchaseButton.onclick = () => {
                if (recommendation.link) {
                    window.open(recommendation.link, '_blank'); // ìƒˆ íƒ­ì—ì„œ ë§í¬ ì—´ê¸°
                }
            };
        }
        // ğŸ‘† --- [ìˆ˜ì •ëœ ë¶€ë¶„ ë] ---
    }
}        
        function restartTest() {
    // ğŸ‘‡ [ê³µí†µ] ì´ ë¶€ë¶„ë§Œ ë‚¨ê²¨ì£¼ì„¸ìš”
    const gaugeFill = document.getElementById('gauge-fill');
    if (gaugeFill) {
        gaugeFill.style.width = '0%';
    }
    
    resultPage.classList.add('hidden');
    startPage.classList.remove('hidden');
}
    </script>

<script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.2/kakao.min.js"></script>

</body>
</html>